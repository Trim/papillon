{% extends "base.html" %}
{% load markup %}
{% load i18n %}

{% block content %}
 {% if not choices %}
 <p class='error'>{% blocktrans %}As long as no options were added to the poll, 
it will not be made available.{% endblocktrans %}</p>
 {% endif %}

 <h2>{% trans "Edit poll" %}</h2>
<form action="" method="post">
<table class='new_poll'>
  <tr>
   <td><label>{% trans "Poll url" %}</label></td>
   <td>
<a href='http://{{root_url}}edit/{{poll.base_url}}'>http://{{root_url}}edit/{{poll.base_url}}</a>
   </td>
   <td class='form_description'>
{% trans "Copy this address and send it to voters who want to participate to this poll" %}
   </td>
  </tr>
  <tr>
   <td><label>{% trans "Administration url" %}</label></td>
   <td>
<a href='http://{{root_url}}poll/{{poll.admin_url}}'>http://{{root_url}}poll/{{poll.admin_url}}</a>
   <td class='form_description'>{% trans "Address to modify the current poll" %}</td>
  </tr>
  {% for field in form %}
  {% if field.is_hidden %}
  {{field}}
  {% else %}
  <tr><td colspan='3'>{{field.errors}}</td></tr>
  <tr>
   <td>{{field.label_tag}}</td>
   <td>{{field}}</td>
   {% if field.help_text %}<td class='form_description'>{{field.help_text|markdown}}</td>{%endif%}
  </tr>
  {% endif %}
  {% endfor %}
  <tr>
   <td></td>
   <td><input type='submit' value='{% trans "Edit" %}' class='submit'/></td>
  </tr>
</table>
</form>

<h2>{% trans "Choices" %}</h2>
{% if choices %}<form action="{{admin_url}}" method="post">
<table class='new_poll'>
  <tr>
   <th>{% trans "Up/down" %}</th><th>{% trans "Label" %}</th><th>{% trans "Limit" %}</th><th>{% trans "Delete?"%}</th>
  </tr>
  {% for choice in choices %}<tr>
   <td><a href='?up_choice={{choice.id}}' class='arrow'>+</a> / <a href='?down_choice={{choice.id}}' class='arrow'>-</a></td><td><input type='text' name='modify_{{choice.id}}' value="{{choice.name}}"/></td><td>{% trans "Limited to"%} <input type='text' name='limit_{{choice.id}}' class='limit'{%if choice.limit%} value='{{choice.limit}}'{%endif%}/> {% trans "vote(s)" %}</td><td><input type='checkbox' name='delete_{{choice.id}}'/></td>
  </tr>{% endfor %}
  <tr>
   <td></td>
   <td><input type='hidden' name='edit' value='1'/>
   <input type='submit' value='{% trans "Edit" %}' class='submit'/></td>
  </tr>
</table>
</form>{% endif %}

<form action="{{admin_url}}" method="post">
<table class='new_poll'>
  <tr><td><label>{% trans "New choice" %}</label></td><td><input type='text' name='new_choice'/></td><td>{%trans "Limited to"%} <input type='text' name='limit' class='limit'/> {%trans "vote(s)"%}</td><td class='form_description'>{% trans "Setting a new choice. Optionally you can set a limit of vote for this choice. This limit is usefull for limited resources allocation." %}</td></tr>
  <tr>
   <td></td>
   <td><input type='hidden' name='add' value='1'/> <input type='submit' value='{% trans "Add" %}' class='submit'/></td>
  </tr>
</table>
</form>

{% endblock %}
